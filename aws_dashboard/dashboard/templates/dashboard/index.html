<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AWS Dashboard</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .tab-content {
            display: none;
            margin-top: 20px;
        }
    
        .active-tab {
            display: block !important;
        }
    
        .pagination .page-item.active .page-link {
            background-color: #0d6efd;
            color: white;
            border-color: #0d6efd;
        }
    </style>    
<script>
    function loadTab(endpoint, tabId, pageLink = null) {
        // Get the single tab content container
        const tabContainer = document.getElementById('dynamic-tab');

        // Update its ID to match the current tab
        tabContainer.setAttribute('data-tab-id', tabId);  // for tracking
        tabContainer.innerHTML = ''; // clear previous content

        // Update pagination active state
        const links = document.querySelectorAll('.pagination .page-item');
        links.forEach(link => link.classList.remove('active'));

        if (pageLink) {
            pageLink.parentElement.classList.add('active');
        }

        // Load new content
        fetch(endpoint)
            .then(response => response.text())
            .then(html => tabContainer.innerHTML = html);
    }

    window.onload = function () {
        loadTab('/ec2/', 'tab1', document.querySelector('.pagination .page-link'));
    };
</script>
  
<script>
function loadTab(endpoint, tabId, pageLink = null) {
    const tabContainer = document.getElementById('dynamic-tab');
    tabContainer.setAttribute('data-tab-id', tabId);
    tabContainer.innerHTML = '';

    const links = document.querySelectorAll('.pagination .page-item');
    links.forEach(link => link.classList.remove('active'));
    if (pageLink) pageLink.parentElement.classList.add('active');

    fetch(endpoint)
        .then(response => response.text())
        .then(html => {
            tabContainer.innerHTML = html;

            // Execute scripts manually
            const scripts = tabContainer.querySelectorAll('script');
            scripts.forEach(oldScript => {
                const newScript = document.createElement('script');
                if (oldScript.src) {
                    newScript.src = oldScript.src;
                } else {
                    newScript.textContent = oldScript.textContent;
                }
                document.body.appendChild(newScript);
                document.body.removeChild(newScript);
            });
        });
}
</script>
</head>
<body class="bg-dark text-white">
    <div class="container py-4">
        <h1 class="mb-4 text-center">AWS Monitoring Dashboard</h1>

        <nav aria-label="Dashboard pagination" class="d-flex justify-content-center mb-4">
            <ul class="pagination pagination-lg flex-wrap justify-content-center">
                <li class="page-item"><a class="page-link" href="#" onclick="loadTab('/ec2/', 'tab1', this)">EC2</a></li>
                <li class="page-item"><a class="page-link" href="#" onclick="loadTab('/ami-summary/', 'tab2', this)">AMI</a></li>
                <li class="page-item"><a class="page-link" href="#" onclick="loadTab('/snapshots-summary/', 'tab3', this)">Snapshot</a></li>
                <li class="page-item"><a class="page-link" href="#" onclick="loadTab('/asg-summary/', 'tab4', this)">ASG</a></li>
                <li class="page-item"><a class="page-link" href="#" onclick="loadTab('/lb-summary/', 'tab5', this)">LoadBalancer</a></li>
                <li class="page-item"><a class="page-link" href="#" onclick="loadTab('/url-health/', 'tab6', this)">URL</a></li>
                <li class="page-item"><a class="page-link" href="#" onclick="loadTab('/ec2-utilization-ui/', 'tab7', this)">EC2 Util</a></li>
                <li class="page-item"><a class="page-link" href="#" onclick="loadTab('/rds-utilization-ui/', 'tab8', this)">RDS</a></li>
                <li class="page-item"><a class="page-link" href="#" onclick="loadTab('/ecs-utilization-ui/', 'tab9', this)">ECS</a></li>
                <li class="page-item"><a class="page-link" href="#" onclick="loadTab('/lambda-summary/', 'tab10', this)">Lambda</a></li>
            </ul>
        </nav>        
        

        <div class="card bg-light tab-content active-tab" id="dynamic-tab"></div>
    </div>

    <!-- Optional Bootstrap JS (for more components if needed) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
